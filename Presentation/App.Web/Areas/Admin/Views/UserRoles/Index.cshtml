@model App.Web.Areas.Admin.Models.Security.UserRolesIndexModel

<h2>User Roles</h2>

<form asp-action="UpdateRoles" method="post">
    <table class="table">
        <thead>
            <tr>
                <th>Username</th>
                <th>Roles</th>
            </tr>
        </thead>
        <tbody>
            @for (int i = 0; i < Model.Users.Count; i++)
            {
                var user = Model.Users[i];

                <tr>
                    <td>@user.Username</td>
                    <td>
                        @foreach (var role in Model.AllRoles)
                        {
                            var hasRole = user.Roles.Contains(role.Name);

                            <div class="form-check form-check-inline">
                                <input type="checkbox"
                                       class="form-check-input"
                                       name="UserRoles[@i].SelectedRoleIds"
                                       value="@role.Id"
                                       @(hasRole ? "checked" : "") />
                                <label class="form-check-label">@role.Name</label>
                            </div>
                        }

                        <input type="hidden" name="UserRoles[@i].UserId" value="@user.UserId" />
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <button type="submit" class="btn btn-success">Save Changes</button>
</form>
