@using App.Core.Domain.Ref
@model App.Web.Areas.Admin.Models.Registrations.RegistrationModel

<h2>Create Registration</h2>

@Html.ValidationSummary(true, "", new { @class = "text-danger" })

<form asp-action="Create" method="post">

    @* Institution Reference *@
    <input asp-for="InstitutionId" type="hidden" />
    <div class="mb-3">
        <label class="form-label">Institution</label>
        <input type="text" class="form-control" value="@Model.InstitutionName" readonly />
    </div>

    <div class="mb-3">
        <label asp-for="LicenseNumber" class="form-label"></label>
        @if (!string.IsNullOrEmpty(Model.LicenseNumber))
        {
            <input asp-for="LicenseNumber" class="form-control" readonly />
        }
        else
        {
            <input asp-for="LicenseNumber" class="form-control" />
        }
        <span asp-validation-for="LicenseNumber" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="LicenseSectorId" class="form-label"></label>
        @if (Model.LicenseSectorId > 0)
        {
            <select asp-for="LicenseSectorId" asp-items="Html.GetEnumSelectList<LicenseSector>()" class="form-control" disabled="disabled"></select>
            <input type="hidden" asp-for="LicenseSectorId" />
        }
        else
        {
            <select asp-for="LicenseSectorId" asp-items="Html.GetEnumSelectList<LicenseSector>()" class="form-control"></select>
        }
        <span asp-validation-for="LicenseSectorId" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="FinancialDomainId" class="form-label"></label>
        @if (Model.LicenseSectorId > 0)
        {
            <select asp-for="FinancialDomainId" asp-items="Html.GetEnumSelectList<FinancialDomain>()" class="form-control" disabled="disabled"></select>
            <input type="hidden" asp-for="FinancialDomainId" />
        }
        else
        {
            <select asp-for="LicenseSectorId" asp-items="Html.GetEnumSelectList<FinancialDomain>()" class="form-control"></select>
        }
        <span asp-validation-for="LicenseSectorId" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="IssueDate" class="form-label"></label>
        <input asp-for="IssueDate" type="date" class="form-control" />
    </div>

    <div class="mb-3">
        <label asp-for="ExpiryDate" class="form-label"></label>
        <input asp-for="ExpiryDate" type="date" class="form-control" />
    </div>

    <div class="mb-3">
        <label asp-for="CountryId" class="form-label"></label>
        @if (Model.CountryId > 0)
        {
            <select asp-for="CountryId" asp-items="Model.AvailableCountries" class="form-control" disabled="disabled"></select>
            <input type="hidden" asp-for="CountryId" />
        }
        else
        {
            <select asp-for="CountryId" asp-items="Model.AvailableCountries" class="form-control"></select>
        }
        <span asp-validation-for="CountryId" class="text-danger"></span>
    </div>

    @* Status is always Draft on creation *@
    <input type="hidden" asp-for="StatusId" value="0" />
    <input type="hidden" asp-for="Status" value="Draft" />
    <div class="mb-3">
        <label class="form-label">License File</label>
        <input type="file" name="LicenseFile" class="form-control" />
    </div>

    <div class="mb-3">
        <label class="form-label">Other Document</label>
        <input type="file" name="DocumentFile" class="form-control" />
    </div>
    <button type="submit" class="btn btn-success">@await Html.T("Common.Save")</button>
    <a asp-action="Index" class="btn btn-secondary">@await Html.T("Common.Cancel")</a>
</form>
